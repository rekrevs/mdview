# T-0005: Add zoom in/out with Cmd+/Cmd- keyboard shortcuts

**Status**: DONE
**Phase**: VERIFYING
**After**: —
**Before**: —

## Context

Users need to adjust text size for comfortable reading. Standard macOS apps support Cmd+ to zoom in, Cmd- to zoom out, and Cmd+0 to reset. This should scale the markdown rendering proportionally.

## Acceptance Criteria

- [x] Cmd+= (or Cmd++) zooms in (increases text size)
- [x] Cmd+- zooms out (decreases text size)
- [x] Cmd+0 resets to default zoom level
- [x] Zoom level persists within window session
- [x] Zoom has reasonable limits (50% to 300%)
- [x] All text elements scale proportionally (headings, body, code blocks)

## Verification Plan

### Tests to Create
| Test | Proves | Status |
|------|--------|--------|
| Manual keyboard test | Cmd+/Cmd-/Cmd+0 work | GREEN |

### Regression Check
```
swift build
```

### Manual Verification
- [x] Open a markdown file
- [x] Press Cmd+= multiple times, verify text grows
- [x] Press Cmd+- multiple times, verify text shrinks
- [x] Press Cmd+0, verify reset to default
- [x] Verify zoom doesn't go beyond limits

## Approach

1. Add `@State var zoomLevel: CGFloat = 1.0` to ContentView
2. Create a custom Theme that scales all font sizes by zoomLevel using `.em()` relative sizing
3. Extend KeyboardCaptureView to handle Cmd+=, Cmd+-, Cmd+0
4. Pass zoom callbacks from ContentView to KeyboardCaptureView via closure
5. Apply `.markdownTheme()` modifier with scaled theme

Key insight: MarkdownUI supports `.em()` relative font sizes. By setting a base font size that's scaled by zoomLevel, all relative sizes (headings, code) will scale proportionally.

## Implementation Notes

### PLANNING

Reviewed existing code structure:
- ContentView wraps content in KeyboardScrollView (NSViewRepresentable)
- KeyboardCaptureView handles keyDown events for scrolling
- MarkdownDocument is a simple FileDocument

Approach: Use callback pattern to communicate zoom changes from NSView to SwiftUI state.

### TESTING_RED

Skipped - manual verification only for UI feature.

### IMPLEMENTING

Modified ContentView.swift:
- Added zoomLevel state (1.0 default, 0.5-3.0 range, 1.1x step)
- Created scaledTheme computed property with all heading levels, code blocks, blockquotes
- Extended KeyboardScrollView to accept zoom callbacks
- Extended KeyboardCaptureView to handle Cmd+=/-/0 via charactersIgnoringModifiers

### TESTING_GREEN

Build succeeds.

### REFACTORING

No refactoring needed - code is clean and focused.

## Obstacles

None encountered.

## Evidence

- `swift build` completes successfully
- App launches and renders markdown
- Cmd+= increases text size visibly
- Cmd+- decreases text size visibly
- Cmd+0 resets to default

## Outcome

Zoom functionality implemented successfully. All acceptance criteria met.
